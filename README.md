# Go-Ride ‚Äî —Å–∏—Å—Ç–µ–º–∞ –∑–∞–∫–∞–∑–∞ —Ç–∞–∫—Å–∏

Go-Ride ‚Äî —ç—Ç–æ –º–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π —Å–µ—Ä–≤–∏—Å –¥–ª—è –∑–∞–∫–∞–∑–∞ —Ç–∞–∫—Å–∏, —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –Ω–∞ Go —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Gin, PostgreSQL –∏ GeoJSON –¥–ª—è –º–∞—Ä—à—Ä—É—Ç–æ–≤.
–ü—Ä–æ–µ–∫—Ç –ø–æ—Å—Ç—Ä–æ–µ–Ω –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø–∞–º —á–∏—Å—Ç–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã, —Å –æ—Ç–¥–µ–ª—å–Ω—ã–º–∏ —Å–ª–æ—è–º–∏: repository ‚Üí service ‚Üí handler.  

–°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –¥–≤–µ —Ä–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: `USER` –∏ `DRIVER`.

- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –∑–∞–∫–∞–∑—ã –∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∏—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–µ.
- –í–æ–¥–∏—Ç–µ–ª—å –º–æ–∂–µ—Ç –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∑–∞–∫–∞–∑—ã –∏ –±—Ä–∞—Ç—å –∏—Ö –≤ —Ä–∞–±–æ—Ç—É.

---

##  –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- Go ‚Äî –±—ç–∫–µ–Ω–¥  
- Gin ‚Äî HTTP-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫  
- PostgreSQL ‚Äî –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö  
- Docker / Docker Compose ‚Äî –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è  
- Makefile ‚Äî —É–¥–æ–±–Ω–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –∫–æ–º–∞–Ω–¥  
- GeoJSON ‚Äî —Ñ–æ—Ä–º–∞—Ç —Ö—Ä–∞–Ω–µ–Ω–∏—è –º–∞—Ä—à—Ä—É—Ç–æ–≤  
- OSRM - API –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –º–∞—Ä—à—Ä—É—Ç–∞
- JWT ‚Äî –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —Å —Ç–æ–∫–µ–Ω–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞ –∏ refresh token  
- Slog ‚Äî —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ  
- Swagger ‚Äî –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API  

---

# üõ†Ô∏è –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

–ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å `.env.example` –≤ `.env` –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ **POSTGRES_PASSWORD** –∏ **JWT_SECRET**

`Note: –í—ã —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –¥—Ä—É–≥–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–æ–¥ –≤–∞—à–∏ –Ω—É–∂–¥—ã.`

–°–æ–±—Ä–∞—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã:

```bash
make up
```

–ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏:

```bash
make migrate-up
```

–û—Ç–∫—Ä—ã—Ç—å Swagger:

http://localhost:8080/swagger/index.html

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ API

## üîë –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏

### –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**Endpoint:** `POST /auth/register`  
**Body:**
```json
{
  "email": "user@example.com",
  "name": "Name",
  "password": "supersecret",
  "role": "USER"
}
```
**Response:**
```json
{
  "id": 1
}
```

---

### –í—Ö–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**Endpoint:** `POST /auth/login`  
**Body:**
```json
{
  "email": "user@example.com",
  "password": "supersecret"
}
```
**Response:**
```json
{
  "access_token": "jwt-access-token",
  "refresh_token": "jwt-refresh-token"
}
```

---

### –í—ã—Ö–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**Endpoint:** `POST /auth/logout`  
**Body:**
```json
{
  "refresh_token": "jwt-refresh-token"
}
```
**Response:**
```json
{
  "status": "ok"
}
```

---

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤

**Endpoint:** `POST /auth/refresh`  
**Body:**
```json
{
  "refresh_token": "jwt-refresh-token"
}
```
**Response:**
```json
{
  "access_token": "new-access-token",
  "refresh_token": "new-refresh-token"
}
```

---

## üöó –ó–∞–∫–∞–∑—ã (Rides)

### –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞

**Endpoint:** `POST /rides`  
**Body:**
```json
{
  "start_point": { "type": "Point", "coordinates": [68.771706, 38.540399] },
  "end_point": { "type": "Point", "coordinates": [68.789264, 38.566598] }
}
```
**Response:**
```json
{
  "id": 1,
  "status": "SEARCHING",
  "route": {
    "type": "LineString",
    "coordinates": [...]
  }
}
```

---

### –ü–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞ –ø–æ ID

**Endpoint:** `GET /rides/{id}`  
**Response:**
```json
{
  "id": 10,
  "user_id": 1,
  "driver_id": 5, // –ú–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º –µ—Å–ª–∏ –≤–æ–¥–∏—Ç–µ–ª—å –ø–æ–∫–∞ –Ω–µ –≤–∑—è–ª –∑–∞–∫–∞–∑
  "status": "IN_PROGRESS",
  "route": { "type": "LineString", "coordinates": [...] }
}
```

`–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–∑–¥–∞–ª –∑–∞–∫–∞–∑.`

---

### –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–∫–∞–∑–∞

**Endpoint:** `GET /rides/{id}/status`  
**Response:**
```json
{
  "order_id": 1,
  "status": "SEARCHING"
}

```

`–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–∑–¥–∞–ª –∑–∞–∫–∞–∑.`

---

### –í–∑—è—Ç—å –∑–∞–∫–∞–∑ –≤–æ–¥–∏—Ç–µ–ª–µ–º

**Endpoint:** `POST /rides/{id}/take`  
**Response:**
```json
{
  "id": 1,
  "status": "IN_PROGRESS"
}
```

---

### –ó–∞–≤–µ—Ä—à–∏—Ç—å –∑–∞–∫–∞–∑

**Endpoint:** `POST /rides/{id}/complete`  
**Response:**
```json
{
  "id": 1,
  "status": "COMPLETED"
}
```

`–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤–æ–¥–∏—Ç–µ–ª—é, –∫–æ—Ç–æ—Ä—ã–π –≤–∑—è–ª –∑–∞–∫–∞–∑.`

---

### –û—Ç–º–µ–Ω–∏—Ç—å –∑–∞–∫–∞–∑

**Endpoint:** `POST /rides/{id}/cancel`  
**Response:**
```json
{
  "id": 1,
  "status": "CANCELED"
}
```

`–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–∑–¥–∞–ª –∑–∞–∫–∞–∑.`

---

### –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤ –¥–ª—è –≤–æ–¥–∏—Ç–µ–ª—è

**Endpoint:** `GET /rides/search`  
**Response:**
```json
{
  "rides": [
    { "id": 1, "start": { "type": "Point", "coordinates": [..] }, "end": {...}, "status": "SEARCHING" },
    { "id": 2, ... }
  ]
}
```